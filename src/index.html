<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ASL Tutor → Robot (A, B, U, V, W)</title>

  <!-- Styles extracted to a separate file for organization -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Header: simple title + capability note -->
  <header>
    <h1>ASL Tutor → Robot</h1>
    <div class="muted">Camera-only by default. Optional: connect UNO via Web Serial (9600 baud).</div>
  </header>

  <!-- Error bar appears if permissions or hardware setup fail -->
  <div id="errbar" role="alert"></div>

  <main>
    <!-- Left: camera preview with an overlay canvas where landmarks are drawn -->
    <section id="stage">
      <video id="video" playsinline muted></video>
      <canvas id="canvas"></canvas>
    </section>

    <!-- Right: selection, status, serial connect, and last command sent -->
    <aside class="panel">
      <div class="row">
        <label for="target">Letter to review:</label>
        <select id="target">
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="U">U</option>
          <option value="V">V</option>
          <option value="W">W</option>
        </select>
      </div>
      <div class="row"><div>Prediction:</div><div id="prediction">–</div></div>
      <div class="row"><div>Status:</div><div id="status" class="bad">Waiting…</div></div>
      <div class="row"><div>Confidence:</div><div id="conf">0 / 4</div></div>
      <hr/>
      <div class="row">
        <button id="connectBtn" disabled>Connect Robot (Web Serial)</button>
        <span id="serialStatus" class="muted">Unsupported in this browser</span>
      </div>
      <div class="row mono">
        <div>Last sent:</div><div id="lastSent">$00000</div>
      </div>
      <div class="muted">
        <!-- Mapping shown to user for clarity; order is Thumb, Index, Middle, Ring, Pinky -->
        Mapping (1=open, 0=closed): A=00000, B=01111, U=01100, V=01100, W=01110.
      </div>
    </aside>
  </main>

  <!-- Small floating debug panel (toggle on/off) -->
  <div id="debug" style="position:fixed;left:12px;bottom:12px;background:rgba(0,0,0,.65);color:#fff;padding:8px 10px;border-radius:8px;font:12px ui-monospace;max-width:60ch;white-space:pre;display:none"></div>
  <button id="dbgToggle" style="position:fixed;left:12px;bottom:64px;padding:6px 10px;border-radius:8px;border:1px solid #d0d7de;background:#fff">Toggle Debug</button>

  <footer class="muted" style="padding:10px 18px">
    <!-- Security notes: camera + serial require secure context -->
    Serve over HTTPS or <code>http://localhost</code> for camera/serial. Chrome/Edge required for Web Serial.
  </footer>

  <!-- External libs: MediaPipe Hands + helper utilities (no build tools needed) -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

  <!-- App logic separated for organization -->
  <script src="app.js"></script>
</body>
</html>
